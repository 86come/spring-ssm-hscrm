<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <title>登录页面</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
</head>

<body>
    <div class="signup-form">
        <form class="" action="" method="post">
            <h1>Sign Up</h1>
            <input type="text" placeholder="用户名" class="txtb" id="username">
            <input type="password" placeholder="密码" class="txtb" id="passwd">
            <input type="button" value="登录" class="signup-btn" id="btn">
            <a href="reg.html">No account yet ?</a>
        </form>
    </div>

    <script src="js/jquery-3.6.0.js"></script>
    <script type="text/javascript">
        //登录按钮
        $("#btn").click(function () {
            //获取数据
            var username = $("#username").val();
            var passwd = $("#passwd").val();
            //发送请求
            $.ajax({
                url:"/crm/login",
                type:"post",
                data:{
                    username:username,
                    passwd:passwd
                },
                success: function(respTxt) {
                    if (respTxt.data == -2){
                        alert("用户名不存在！");
                        alert(respTxt.message);
                        return;
                    }
                    if (respTxt.data == -1){
                        alert("密码错误！");
                        alert(respTxt.message);
                        return;
                    }
                    alert("登录成功！");
                    alert(respTxt.data);
                    location.href = "/emp/index.html?eid="+respTxt.data;
                }
            });
        });
    </script>
</body>

</html>
